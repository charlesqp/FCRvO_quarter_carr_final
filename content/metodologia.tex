\subsection{Projeto de um controlador por realimentação de estados} 
A alocação dos autovalores $\lambda = \sigma \pm \omega_n.i$ é determinada a partir da aplicação dos valores encontrados nas equações   e 

\begin{align} \label{eq:autovalores_de_xi}
     \lambda = \omega_n * (-\xi \pm \sqrt{1-\xi^2}.i)
\end{align}
    
O ganho de realimentação para alocação de autovalores em malha fechada é computado através da equação de Lyapunov conforme descrito na seção   conforme exibido a seguir:
    
    \begin{equation*} 
    \begin{split}
        \mathbf{F} =
        \begin{bmatrix}
            -43.5923 &  47.1507 &       0       & 0 & \\ 
            -47.1507 & -43.5923 &       0 &       0 & \\
                   0 &        0 & -8.7185 &  9.4301 & \\
                   0 &        0 & -9.4301 & -8.7185 & \\
        \end{bmatrix}
    \end{split}
    \end{equation*} 
 
    \begin{equation*} 
    \begin{split}
        \mathbf{B} = B_u = 
        \begin{bmatrix}
            0 & \\
            -\frac{1}{m_s}&\\ \\
            0 & \\
            \frac{1}{m_u} \\
        \end{bmatrix};\ \
    \end{split}
    \begin{split}
    \mathbf{\bar{K}} =
        \begin{bmatrix}
        1&0&1&0&
        \end{bmatrix}
    \end{split}
    \end{equation*} 
    
    Resolvendo a equação de Lyapunov \ref{eq:lyapunov} para $T$ e substituindo a matriz T encontrada na equação \ref{eq:ganho} obtém-se os seguintes valores de ganhos de realimentação, valores arredondados na quarta casa decimal:
    
    \begin{center}
    \begin{tabular}{|c|c|}
        \hline
        Estado & Ganho\\
        \hline
        \hline
        $x_1$    & -18023.2837\\
        $x_2$    & -4567.6793\\
        $x_3$    & 13118.63414\\   
        $x_4$    & 2758.2869 \\
        \hline
    \end{tabular}
    \end{center}
    
\subsection{Simulação da resposta temporal do modelo linearizado em malha fechada com controlador por realimentação de estados} \label{sc:analise_resposta}
    
Abaixo seguem gráficos que ilustram a simulação temporal da resposta do sistema linearizado para excitação com entrada em "lombada" degrau de 0.1m:
  
\subsection{Simulação da resposta temporal do sistema em malha fechada considerando o sistema não linear original utilizando o controlador projetado para o sistema linear}
    
Abaixo seguem gráficos que ilustram a simulação temporal da resposta do sistema não linear comparada com a resposta do sistema linearizado para excitação com entrada em "lombada" degrau de 0.1m:

A observação dos gráficos da resposta temporal exibida nas figuras  traz a conclusão que, para este caso específico, a resposta temporal do sistema não linear em malha fechada com o controlador projetado para o sistema linearizado se mostrou muito semelhante a resposta temporal do sistema linear. Neste caso, contribuíram para isto a excitação com "lombada" em degrau pequena afastou pouco o sistema do ponto de equilíbrio, ao mesmo tempo que um controlador com um amortecimento relativamente alto, $\xi \simeq 0.6$, contribuiu para que a resposta transitória rica em frequências fosse rapidamente cancelada e apenas o comportamento em regime fosse exibido a maior parte do tempo.
    
Para comparação, é exibido a seguir a mesma simulação temporal para uma entrada com "lombada" em degrau unitário. Esta entrada excita mais frequências de ambos os sistema e podem revelar mais informações sobre as diferenças entre ambos os sistemas pois leva o sistema linearizado para uma condição de operação mais afastada do ponto de equilíbrio: 
    
A observação dos gráficos da resposta temporal exibida nas figuras demonstra que para uma entrada que desloque o sistema para uma região muito distante do ponto de equilíbrio utilizado para linearização pode causar uma grande diferença na resposta temporal do controle em malha fechada, inclusive podendo degradar significativamente o desempenho do controlador por realimentação de estados.  
        
\subsection{Simulação da resposta temporal em malha fechada com o controlador projetado para o sistema linearizado e considerando perturbação}
 
Abaixo seguem gráficos que ilustram a simulação temporal da resposta do sistema linearizado para excitação com perturbações em degraus aleatórios entre $\pm$ 5cm.

Para a análise da resposta dinâmica do sistema controlado permanecem válidas as mesmas considerações apresentadas na seção \ref{sc:analise_resposta}

\subsection{Projeto de um controlador baseado no observador para o sistema linearizado considerando que apenas algumas variáveis de estado não são mensuráveis}

Considerou-se para efeitos práticos que as variáveis de estado $x_w$ e $\dot{x}_w$, correspondentes a posição vertical do eixo da roda e sua respectiva velocidade, não são mensuráveis.

Foi decidido que a dinâmica do estimador de estados deve ser 4 vezes  mais rápida do que a dinâmica do sistema linearizado, cujos autovalores são exibidos em \ref{eq:autovalores}. Foi adicionado um valor de offset aos autovalores da planta original, os autovalores resultantes para a dinâmica do preditor linear são exibidos a seguir:

    \begin{equation} \label{eq:autovalores_pred}
        \begin{split}
              \mathbf{eig(A-L*C)}=\
        \end{split}
        \begin{bmatrix}
             -36.0016& +72.3231i&\\
             -36.0016& -72.3231i&\\
             -27.9577& +8.4588i&\\
             -27.9577& -8.4588i&\\
        \end{bmatrix}
    \end{equation}
    Na figura  é demonstrado como ficou o design de todos os autovalores do projeto.

    Os autovalores foram utilizados para definir o conjunto de ganhos $L$ do observador de estados através da fórmula de Lyapunov definida em \ref{eq:lyapunov}. No entanto empregou-se a seguinte substituição de variáveis:
    \begin{equation} \label{eq:var_pred}
        \begin{split}
        A = A^{t}&\\
        B = C^{t}&
        \end{split}
    \end{equation}

    Desta maneira, foi encontrada a seguinte matriz de ganhos de realimentação para o observador de estados linear, números arredondados na quarta casa decimal:

    \begin{equation} \label{eq:ganhos_pred}
        \begin{split}
            \mathbf{L}=\
        \end{split}
        \begin{bmatrix}
          61.7626&   61.7626&   61.7626&   61.7626&\\
         760.6968&  760.6968&  760.6968&  760.6968&\\
          46.2422&   46.2422&   46.24227&  46.2422&\\
        3075.9999& 3075.9999& 3075.9999& 3075.9999&\\
        \end{bmatrix}
    \end{equation}

    Uma simulação temporal do sistema não linear controlado pelo ganho de realimentação de estados, obtido através do preditor desenvolvido nesta seção é exibido nas figuras abaixo:

    Houve uma piora no desempenho do do sistema real controlado em malha fechada quando se aplicou a restrição dos estados observáveis, quando comparado com a situação onde todos os estados são observáveis. Especialmente durante os transitórios da perturbação. No entanto, para pequenas variações, o controle baseado em realimentação de estados de um observador linear se mostrou satisfatório.   